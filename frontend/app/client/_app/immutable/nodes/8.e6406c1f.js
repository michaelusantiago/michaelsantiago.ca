import{s as ye,f as v,a as L,g,h as w,x as re,c as B,d as _,j as p,i as C,y as d,w as G,S as st,M as W,E as nt,l as P,m as A,v as ie,z as Z,n as $,N as pe,D as lt,H as Le,T as Be,I as Ue,J as Fe,K as je,R as it,G as Oe,B as He,Q as Re,o as rt,b as ot,t as ct,p as _e,e as ze,k as ve}from"../chunks/scheduler.22c66fb6.js";import{S as we,i as Ee,a as O,g as ge,t as H,c as be,b as Se,d as Ce,m as Te,e as De}from"../chunks/index.94eb7729.js";import{g as ut}from"../chunks/globals.7f7f1b26.js";import{e as ke}from"../chunks/each.600bc0e3.js";import{e as Ie,u as ft,f as at,a as _t,d as me,c as dt,b as ht,h as mt}from"../chunks/store.565d065b.js";import{e as Ke,O as pt,b as vt,u as We,f as gt,k as bt}from"../chunks/Database.7f6fed06.js";import"../chunks/singletons.9380a151.js";function Ze(l,e,t){const s=l.slice();s[8]=e[t];const n=`${s[8].first_name} ${s[8].last_name}`;s[9]=n;const r=s[9].length>30?s[9].substring(0,13).padEnd(16,"."):s[9];s[10]=r;const a=s[2](s[8].id);return s[11]=a,s}function kt(l){let e;return{c(){e=P("âš«")},l(t){e=A(t,"âš«")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function yt(l){let e;return{c(){e=P("ðŸŸ¢")},l(t){e=A(t,"ðŸŸ¢")},m(t,s){C(t,e,s)},d(t){t&&_(e)}}}function Ge(l){let e,t=l[11]+"",s;return{c(){e=v("span"),s=P(t),this.h()},l(n){e=g(n,"SPAN",{class:!0});var r=w(e);s=A(r,t),r.forEach(_),this.h()},h(){p(e,"class","new-messages svelte-1ar67fp")},m(n,r){C(n,e,r),d(e,s)},p(n,r){r&2&&t!==(t=n[11]+"")&&$(s,t)},d(n){n&&_(e)}}}function Je(l){let e,t,s,n,r=l[10]+"",a,o,i,c,f,h;function u(M,E){return M[8].is_online?yt:kt}let k=u(l),S=k(l),y=l[11]&&Ge(l);function U(){return l[4](l[8])}return{c(){e=v("li"),t=v("button"),S.c(),s=P(`\r
                            Â \r
                            `),n=v("span"),a=P(r),i=P(`\r
                            Â \r
                            `),y&&y.c(),c=L(),this.h()},l(M){e=g(M,"LI",{class:!0});var E=w(e);t=g(E,"BUTTON",{class:!0});var I=w(t);S.l(I),s=A(I,`\r
                            Â \r
                            `),n=g(I,"SPAN",{title:!0});var N=w(n);a=A(N,r),N.forEach(_),i=A(I,`\r
                            Â \r
                            `),y&&y.l(I),I.forEach(_),c=B(E),E.forEach(_),this.h()},h(){p(n,"title",o=l[9]),p(t,"class","svelte-1ar67fp"),ie(t,"online",l[8].is_online),p(e,"class","svelte-1ar67fp"),ie(e,"active",l[8].id===l[0])},m(M,E){C(M,e,E),d(e,t),S.m(t,null),d(t,s),d(t,n),d(n,a),d(t,i),y&&y.m(t,null),d(e,c),f||(h=Z(t,"click",U),f=!0)},p(M,E){l=M,k!==(k=u(l))&&(S.d(1),S=k(l),S&&(S.c(),S.m(t,s))),E&2&&r!==(r=l[10]+"")&&$(a,r),E&2&&o!==(o=l[9])&&p(n,"title",o),l[11]?y?y.p(l,E):(y=Ge(l),y.c(),y.m(t,null)):y&&(y.d(1),y=null),E&2&&ie(t,"online",l[8].is_online),E&3&&ie(e,"active",l[8].id===l[0])},d(M){M&&_(e),S.d(),y&&y.d(),f=!1,h()}}}function wt(l){let e,t,s,n='<i class="ri-chat-new-line svelte-1ar67fp"></i>Â Friend&#39;s List',r,a,o,i=ke(l[1]),c=[];for(let f=0;f<i.length;f+=1)c[f]=Je(Ze(l,i,f));return{c(){e=v("main"),t=v("div"),s=v("h3"),s.innerHTML=n,r=L(),a=v("div"),o=v("ul");for(let f=0;f<c.length;f+=1)c[f].c();this.h()},l(f){e=g(f,"MAIN",{});var h=w(e);t=g(h,"DIV",{class:!0});var u=w(t);s=g(u,"H3",{class:!0,"data-svelte-h":!0}),re(s)!=="svelte-1ltvw87"&&(s.innerHTML=n),r=B(u),a=g(u,"DIV",{class:!0});var k=w(a);o=g(k,"UL",{});var S=w(o);for(let y=0;y<c.length;y+=1)c[y].l(S);S.forEach(_),k.forEach(_),u.forEach(_),h.forEach(_),this.h()},h(){p(s,"class","svelte-1ar67fp"),p(a,"class","friends-list-wrapper svelte-1ar67fp"),p(t,"class","friends-list svelte-1ar67fp")},m(f,h){C(f,e,h),d(e,t),d(t,s),d(t,r),d(t,a),d(a,o);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(o,null)},p(f,[h]){if(h&15){i=ke(f[1]);let u;for(u=0;u<i.length;u+=1){const k=Ze(f,i,u);c[u]?c[u].p(k,h):(c[u]=Je(k),c[u].c(),c[u].m(o,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=i.length}},i:G,o:G,d(f){f&&_(e),st(c,f)}}}function Et(l,e,t){let s,n,r;W(l,Ie,f=>t(0,s=f)),W(l,ft,f=>t(5,n=f)),W(l,at,f=>t(1,r=f));const a=nt(),o=f=>n.filter(u=>u.from==f).length,i=async f=>{pe(Ie,s=f,s),a("click",f)};return[s,r,o,i,f=>i(f.id)]}class It extends we{constructor(e){super(),Ee(this,e,Et,wt,ye,{})}}function Qe(l){let e,t,s;return t=new It({}),t.$on("click",l[2]),{c(){e=v("div"),Se(t.$$.fragment),this.h()},l(n){e=g(n,"DIV",{class:!0});var r=w(e);Ce(t.$$.fragment,r),r.forEach(_),this.h()},h(){p(e,"class","friends-list-wrapper svelte-iij74")},m(n,r){C(n,e,r),Te(t,e,null),s=!0},p:G,i(n){s||(O(t.$$.fragment,n),s=!0)},o(n){H(t.$$.fragment,n),s=!1},d(n){n&&_(e),De(t)}}}function St(l){let e,t,s='<span class="icon svelte-iij74"><i class="ri-chat-new-line"></i></span>',n,r,a,o,i=l[0]&&Qe(l);return{c(){e=v("main"),t=v("button"),t.innerHTML=s,n=L(),i&&i.c(),this.h()},l(c){e=g(c,"MAIN",{});var f=w(e);t=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),re(t)!=="svelte-1k85noj"&&(t.innerHTML=s),n=B(f),i&&i.l(f),f.forEach(_),this.h()},h(){p(t,"class","svelte-iij74")},m(c,f){C(c,e,f),d(e,t),d(e,n),i&&i.m(e,null),r=!0,a||(o=[Z(window,"keydown",l[1]),Z(t,"focus",l[3]),Z(e,"focus",l[4]),Z(e,"mouseover",l[5]),Z(e,"mouseleave",l[6])],a=!0)},p(c,[f]){c[0]?i?(i.p(c,f),f&1&&O(i,1)):(i=Qe(c),i.c(),O(i,1),i.m(e,null)):i&&(ge(),H(i,1,1,()=>{i=null}),be())},i(c){r||(O(i),r=!0)},o(c){H(i),r=!1},d(c){c&&_(e),i&&i.d(),a=!1,lt(o)}}}function Ct(l,e,t){const s=nt();let n=!1;return[n,h=>{h.key!=="Tab"&&h.key!=="Shift"&&h.key!==" "&&t(0,n=!1)},async h=>{s("click",h.detail),t(0,n=!1)},()=>t(0,n=!0),()=>t(0,n=!0),()=>t(0,n=!0),()=>t(0,n=!1)]}class Tt extends we{constructor(e){super(),Ee(this,e,Ct,St,ye,{})}}const Dt=l=>({}),Xe=l=>({}),Mt=l=>({}),Ye=l=>({});function Nt(l){let e,t,s,n,r,a,o;const i=l[2].message,c=Le(i,l,l[1],Ye),f=l[2]["chat-date"],h=Le(f,l,l[1],Xe);return{c(){e=v("main"),t=v("div"),s=v("div"),c&&c.c(),n=L(),r=v("p"),h&&h.c(),this.h()},l(u){e=g(u,"MAIN",{});var k=w(e);t=g(k,"DIV",{class:!0});var S=w(t);s=g(S,"DIV",{class:!0});var y=w(s);c&&c.l(y),n=B(y),r=g(y,"P",{class:!0});var U=w(r);h&&h.l(U),U.forEach(_),y.forEach(_),S.forEach(_),k.forEach(_),this.h()},h(){p(r,"class","chat-date svelte-1bj46e9"),p(s,"class","message svelte-1bj46e9"),p(t,"class",a=Be(l[0])+" svelte-1bj46e9")},m(u,k){C(u,e,k),d(e,t),d(t,s),c&&c.m(s,null),d(s,n),d(s,r),h&&h.m(r,null),o=!0},p(u,[k]){c&&c.p&&(!o||k&2)&&Ue(c,i,u,u[1],o?je(i,u[1],k,Mt):Fe(u[1]),Ye),h&&h.p&&(!o||k&2)&&Ue(h,f,u,u[1],o?je(f,u[1],k,Dt):Fe(u[1]),Xe),(!o||k&1&&a!==(a=Be(u[0])+" svelte-1bj46e9"))&&p(t,"class",a)},i(u){o||(O(c,u),O(h,u),o=!0)},o(u){H(c,u),H(h,u),o=!1},d(u){u&&_(e),c&&c.d(u),h&&h.d(u)}}}function qt(l,e,t){let{$$slots:s={},$$scope:n}=e,{source:r}=e;return l.$$set=a=>{"source"in a&&t(0,r=a.source),"$$scope"in a&&t(1,n=a.$$scope)},[r,n,s]}class Pt extends we{constructor(e){super(),Ee(this,e,qt,Nt,ye,{source:0})}}const{Boolean:At,document:$e}=ut;function xe(l,e,t){const s=l.slice();return s[33]=e[t],s}function Vt(l){let e,t,s,n,r=l[16].is_online?"ðŸŸ¢ online":"âš« offline",a;return{c(){e=v("div"),t=v("div"),s=P(`Michael is \r
                    `),n=v("span"),a=P(r),this.h()},l(o){e=g(o,"DIV",{class:!0});var i=w(e);t=g(i,"DIV",{class:!0});var c=w(t);s=A(c,`Michael is \r
                    `),n=g(c,"SPAN",{class:!0});var f=w(n);a=A(f,r),f.forEach(_),c.forEach(_),i.forEach(_),this.h()},h(){p(n,"class","status svelte-q3wrar"),ie(n,"online",l[16].is_online),p(t,"class","chat-who svelte-q3wrar"),p(e,"class","chat-who-wrapper svelte-q3wrar")},m(o,i){C(o,e,i),d(e,t),d(t,s),d(t,n),d(n,a)},p(o,i){i[0]&65536&&r!==(r=o[16].is_online?"ðŸŸ¢ online":"âš« offline")&&$(a,r),i[0]&65536&&ie(n,"online",o[16].is_online)},i:G,o:G,d(o){o&&_(e)}}}function Lt(l){let e,t,s,n;function r(i,c){return i[2]?Ut:Bt}let a=r(l),o=a(l);return s=new Tt({}),s.$on("click",l[18]),{c(){e=v("div"),o.c(),t=L(),Se(s.$$.fragment),this.h()},l(i){e=g(i,"DIV",{class:!0});var c=w(e);o.l(c),t=B(c),Ce(s.$$.fragment,c),c.forEach(_),this.h()},h(){p(e,"class","chat-who-wrapper svelte-q3wrar")},m(i,c){C(i,e,c),o.m(e,null),d(e,t),Te(s,e,null),n=!0},p(i,c){a===(a=r(i))&&o?o.p(i,c):(o.d(1),o=a(i),o&&(o.c(),o.m(e,t)))},i(i){n||(O(s.$$.fragment,i),n=!0)},o(i){H(s.$$.fragment,i),n=!1},d(i){i&&_(e),o.d(),De(s)}}}function Bt(l){let e,t="Select a friend to chat";return{c(){e=v("span"),e.textContent=t,this.h()},l(s){e=g(s,"SPAN",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-19bbntk"&&(e.textContent=t),this.h()},h(){p(e,"class","chat-who svelte-q3wrar")},m(s,n){C(s,e,n)},p:G,d(s){s&&_(e)}}}function Ut(l){let e,t,s=l[2].first_name+"",n;return{c(){e=v("span"),t=P("Me & "),n=P(s),this.h()},l(r){e=g(r,"SPAN",{class:!0});var a=w(e);t=A(a,"Me & "),n=A(a,s),a.forEach(_),this.h()},h(){p(e,"class","chat-who svelte-q3wrar")},m(r,a){C(r,e,a),d(e,t),d(e,n)},p(r,a){a[0]&4&&s!==(s=r[2].first_name+"")&&$(n,s)},d(r){r&&_(e)}}}function Ft(l){let e,t="Loading chats...";return{c(){e=v("div"),e.textContent=t},l(s){e=g(s,"DIV",{"data-svelte-h":!0}),re(e)!=="svelte-mxmy9x"&&(e.textContent=t)},m(s,n){C(s,e,n)},p:G,i:G,o:G,d(s){s&&_(e)}}}function jt(l){let e,t,s=ke(l[4]),n=[];for(let a=0;a<s.length;a+=1)n[a]=et(xe(l,s,a));const r=a=>H(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=ze()},l(a){for(let o=0;o<n.length;o+=1)n[o].l(a);e=ze()},m(a,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(a,o);C(a,e,o),t=!0},p(a,o){if(o[0]&131096){s=ke(a[4]);let i;for(i=0;i<s.length;i+=1){const c=xe(a,s,i);n[i]?(n[i].p(c,o),O(n[i],1)):(n[i]=et(c),n[i].c(),O(n[i],1),n[i].m(e.parentNode,e))}for(ge(),i=s.length;i<n.length;i+=1)r(i);be()}},i(a){if(!t){for(let o=0;o<s.length;o+=1)O(n[o]);t=!0}},o(a){n=n.filter(At);for(let o=0;o<n.length;o+=1)H(n[o]);t=!1},d(a){a&&_(e),st(n,a)}}}function Ot(l){let e,t=l[33].message+"",s;return{c(){e=v("span"),s=P(t),this.h()},l(n){e=g(n,"SPAN",{slot:!0});var r=w(e);s=A(r,t),r.forEach(_),this.h()},h(){p(e,"slot","message")},m(n,r){C(n,e,r),d(e,s)},p(n,r){r[0]&16&&t!==(t=n[33].message+"")&&$(s,t)},d(n){n&&_(e)}}}function Ht(l){let e,t=new Date(l[33].created).toLocaleString("en-us",{timeZone:l[17],dateStyle:"medium",timeStyle:"long"})+"",s,n;return{c(){e=v("span"),s=P(t),n=L(),this.h()},l(r){e=g(r,"SPAN",{slot:!0});var a=w(e);s=A(a,t),n=B(a),a.forEach(_),this.h()},h(){p(e,"slot","chat-date")},m(r,a){C(r,e,a),d(e,s),d(e,n)},p(r,a){a[0]&131088&&t!==(t=new Date(r[33].created).toLocaleString("en-us",{timeZone:r[17],dateStyle:"medium",timeStyle:"long"})+"")&&$(s,t)},d(r){r&&_(e)}}}function et(l){let e,t;return e=new Pt({props:{source:l[3].id===l[33].from?"from":"to",$$slots:{"chat-date":[Ht],message:[Ot]},$$scope:{ctx:l}}}),{c(){Se(e.$$.fragment)},l(s){Ce(e.$$.fragment,s)},m(s,n){Te(e,s,n),t=!0},p(s,n){const r={};n[0]&24&&(r.source=s[3].id===s[33].from?"from":"to"),n[0]&131088|n[1]&32&&(r.$$scope={dirty:n,ctx:s}),e.$set(r)},i(s){t||(O(e.$$.fragment,s),t=!0)},o(s){H(e.$$.fragment,s),t=!1},d(s){De(e,s)}}}function Rt(l){let e,t,s=l[2].first_name+"",n,r;return{c(){e=v("div"),t=v("span"),n=P(s),r=P(" typing.."),this.h()},l(a){e=g(a,"DIV",{class:!0});var o=w(e);t=g(o,"SPAN",{});var i=w(t);n=A(i,s),r=A(i," typing.."),i.forEach(_),o.forEach(_),this.h()},h(){p(e,"class","friend-is-typing svelte-q3wrar"),ve(e,"visibility",l[2].is_typing?"visible":"hidden")},m(a,o){C(a,e,o),d(e,t),d(t,n),d(t,r)},p(a,o){o[0]&4&&s!==(s=a[2].first_name+"")&&$(n,s),o[0]&4&&ve(e,"visibility",a[2].is_typing?"visible":"hidden")},d(a){a&&_(e)}}}function zt(l){let e,t,s=l[16].first_name+"",n,r;return{c(){e=v("div"),t=v("span"),n=P(s),r=P(" typing.."),this.h()},l(a){e=g(a,"DIV",{class:!0});var o=w(e);t=g(o,"SPAN",{});var i=w(t);n=A(i,s),r=A(i," typing.."),i.forEach(_),o.forEach(_),this.h()},h(){p(e,"class","friend-is-typing svelte-q3wrar"),ve(e,"visibility",l[16].is_typing?"visible":"hidden")},m(a,o){C(a,e,o),d(e,t),d(t,n),d(t,r)},p(a,o){o[0]&65536&&s!==(s=a[16].first_name+"")&&$(n,s),o[0]&65536&&ve(e,"visibility",a[16].is_typing?"visible":"hidden")},d(a){a&&_(e)}}}function tt(l){let e,t="sending....";return{c(){e=v("div"),e.textContent=t,this.h()},l(s){e=g(s,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-rilc3d"&&(e.textContent=t),this.h()},h(){p(e,"class","sending-notification svelte-q3wrar")},m(s,n){C(s,e,n)},d(s){s&&_(e)}}}function Kt(l){let e,t,s,n="Submit",r,a,o,i,c,f,h,u,k,S,y,U,M,E,I,N,x,ee,q,te,F,oe,R,ce,z,ue,se,ne,K,fe,de;const m=[Lt,Vt],T=[];function Me(b,D){return b[3].role===0?0:1}u=Me(l),k=T[u]=m[u](l);const Ne=[jt,Ft],J=[];function qe(b,D){return b[11]?1:0}I=qe(l),N=J[I]=Ne[I](l);function Pe(b,D){if(b[3].role==1)return zt;if(b[2])return Rt}let le=Pe(l),V=le&&le(l),j=l[14]&&tt();return{c(){e=L(),t=v("form"),s=v("button"),s.textContent=n,r=L(),a=v("input"),c=L(),f=v("main"),h=v("div"),k.c(),S=L(),y=v("div"),U=v("div"),M=L(),E=v("div"),N.c(),x=L(),V&&V.c(),ee=L(),q=v("form"),j&&j.c(),te=L(),F=v("textarea"),oe=L(),R=v("input"),ce=L(),z=v("button"),ue=P("Send"),this.h()},l(b){it("svelte-o2mvh3",$e.head).forEach(_),e=B(b),t=g(b,"FORM",{class:!0,method:!0,action:!0});var Q=w(t);s=g(Q,"BUTTON",{id:!0,type:!0,class:!0,"data-svelte-h":!0}),re(s)!=="svelte-1n6la0w"&&(s.textContent=n),r=B(Q),a=g(Q,"INPUT",{name:!0,type:!0,class:!0}),Q.forEach(_),c=B(b),f=g(b,"MAIN",{class:!0});var ae=w(f);h=g(ae,"DIV",{class:!0});var X=w(h);k.l(X),S=B(X),y=g(X,"DIV",{class:!0});var he=w(y);U=g(he,"DIV",{}),w(U).forEach(_),M=B(he),E=g(he,"DIV",{class:!0});var Ae=w(E);N.l(Ae),Ae.forEach(_),he.forEach(_),x=B(X),V&&V.l(X),ee=B(X),q=g(X,"FORM",{class:!0,method:!0,action:!0});var Y=w(q);j&&j.l(Y),te=B(Y),F=g(Y,"TEXTAREA",{class:!0,name:!0,placeholder:!0}),w(F).forEach(_),oe=B(Y),R=g(Y,"INPUT",{name:!0,type:!0}),ce=B(Y),z=g(Y,"BUTTON",{class:!0});var Ve=w(z);ue=A(Ve,"Send"),Ve.forEach(_),Y.forEach(_),X.forEach(_),ae.forEach(_),this.h()},h(){$e.title="Chat - Michael Santiago",p(s,"id","submit_button"),p(s,"type","submit"),p(s,"class","svelte-q3wrar"),p(a,"name","friend_id"),a.value=o=l[5]||l[16].id,p(a,"type","text"),p(a,"class","svelte-q3wrar"),p(t,"class","hidden-form svelte-q3wrar"),p(t,"method","POST"),p(t,"action","/chat?/get"),p(E,"class","messages-wrapper svelte-q3wrar"),p(y,"class","content svelte-q3wrar"),p(F,"class","new-message svelte-q3wrar"),p(F,"name","message"),p(F,"placeholder","type your message here"),R.hidden=!0,p(R,"name","send_to_id"),p(R,"type","text"),R.value=l[5],z.disabled=se=!l[12],p(z,"class","btn-send svelte-q3wrar"),p(q,"class","message-input-control svelte-q3wrar"),p(q,"method","POST"),p(q,"action","?/send"),p(h,"class","chat-container svelte-q3wrar"),p(f,"class","svelte-q3wrar")},m(b,D){C(b,e,D),C(b,t,D),d(t,s),l[20](s),d(t,r),d(t,a),l[21](t),C(b,c,D),C(b,f,D),d(f,h),T[u].m(h,null),d(h,S),d(h,y),d(y,U),d(y,M),d(y,E),J[I].m(E,null),l[23](y),d(h,x),V&&V.m(h,null),d(h,ee),d(h,q),j&&j.m(q,null),d(q,te),d(q,F),Oe(F,l[0]),l[25](F),d(q,oe),d(q,R),d(q,ce),d(q,z),d(z,ue),l[28](z),K=!0,fe||(de=[He(i=Ke.call(null,t,l[22])),Z(F,"input",l[24]),Z(F,"keypress",l[26]),Z(F,"keydown",l[27]),He(ne=Ke.call(null,q,l[29]))],fe=!0)},p(b,D){(!K||D[0]&65568&&o!==(o=b[5]||b[16].id)&&a.value!==o)&&(a.value=o),i&&Re(i.update)&&D[0]&10288&&i.update.call(null,b[22]);let Q=u;u=Me(b),u===Q?T[u].p(b,D):(ge(),H(T[Q],1,1,()=>{T[Q]=null}),be(),k=T[u],k?k.p(b,D):(k=T[u]=m[u](b),k.c()),O(k,1),k.m(h,S));let ae=I;I=qe(b),I===ae?J[I].p(b,D):(ge(),H(J[ae],1,1,()=>{J[ae]=null}),be(),N=J[I],N?N.p(b,D):(N=J[I]=Ne[I](b),N.c()),O(N,1),N.m(E,null)),le===(le=Pe(b))&&V?V.p(b,D):(V&&V.d(1),V=le&&le(b),V&&(V.c(),V.m(h,ee))),b[14]?j||(j=tt(),j.c(),j.m(q,te)):j&&(j.d(1),j=null),D[0]&1&&Oe(F,b[0]),(!K||D[0]&32&&R.value!==b[5])&&(R.value=b[5]),(!K||D[0]&4096&&se!==(se=!b[12]))&&(z.disabled=se),ne&&Re(ne.update)&&D[0]&28817&&ne.update.call(null,b[29])},i(b){K||(O(k),O(N),K=!0)},o(b){H(k),H(N),K=!1},d(b){b&&(_(e),_(t),_(c),_(f)),l[20](null),l[21](null),T[u].d(),J[I].d(),l[23](null),V&&V.d(),j&&j.d(),l[25](null),l[28](null),fe=!1,lt(de)}}}function Wt(l,e,t){let s,n,r,a,o,i,c;W(l,dt,m=>t(3,n=m)),W(l,ht,m=>t(16,r=m)),W(l,me,m=>t(4,a=m)),W(l,Ie,m=>t(5,o=m)),W(l,at,m=>t(19,i=m)),W(l,mt,m=>t(17,c=m)),_t.set("chat");let f,h,u,k,S,y,U=!1,M=!1,E,I=!1,N=!1,x=null;const ee=new pt(vt.PUBLIC_PB_URI),q=async m=>{await ct();const T=document.getElementById("submit_button");T==null||T.click()};rt(async()=>{n.role==1&&!a.length&&(t(11,U=!0),pe(me,a=(await gt(n.id,r.id)).chats,a),t(11,U=!1))});const te=async m=>{try{await ee.collection("users").update(n==null?void 0:n.id,{is_typing:I})}catch(T){console.log(T)}},F=()=>f.scrollTo(0,f.scrollHeight);ot(()=>F());function oe(m){_e[m?"unshift":"push"](()=>{S=m,t(9,S)})}function R(m){_e[m?"unshift":"push"](()=>{y=m,t(10,y)})}const ce=()=>(t(11,U=!0),async({result:m})=>{var T;t(11,U=!1),t(13,E=m),pe(me,a=(T=E==null?void 0:E.data)==null?void 0:T.chats,a),await We(o)});function z(m){_e[m?"unshift":"push"](()=>{f=m,t(6,f)})}function ue(){u=this.value,t(0,u)}function se(m){_e[m?"unshift":"push"](()=>{h=m,t(7,h)})}const ne=m=>{m.key=="Enter"||m.key=="Tab"||m.key=="Shift"||m.key=="Alt"||(I||(t(1,I=!0),clearTimeout(x)),t(15,x=setTimeout(()=>t(1,I=!1),3e3)))},K=async m=>{!(m.key=="Enter"&&m.shiftKey)&&m.key==="Enter"&&(M&&u.trim()&&k.click(),m.preventDefault())};function fe(m){_e[m?"unshift":"push"](()=>{k=m,t(8,k)})}const de=()=>(t(14,N=!0),t(12,M=!1),async({result:m})=>{var T;t(14,N=!1),t(13,E=m),pe(me,a=(T=E==null?void 0:E.data)==null?void 0:T.chats,a),t(0,u=""),h.focus()});return l.$$.update=()=>{l.$$.dirty[0]&524320&&t(2,s=i.find(m=>m.id===o)||null),l.$$.dirty[0]&13&&(n.role==0?t(12,M=!!(u&&s)):t(12,M=!!u)),l.$$.dirty[0]&2&&te(),l.$$.dirty[0]&56&&a&&(n.role==1?(async()=>await bt(n.id))():o&&(async()=>await We(o))())},[u,I,s,n,a,o,f,h,k,S,y,U,M,E,N,x,r,c,q,i,oe,R,ce,z,ue,se,ne,K,fe,de]}class xt extends we{constructor(e){super(),Ee(this,e,Wt,Kt,ye,{},null,[-1,-1])}}export{xt as component};
